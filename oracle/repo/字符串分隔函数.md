作者：[FY]()

版本：Oracle11G+

日期：2019-06-25 13:37:48

说明：按指定字符分隔字符串并提取指定违章的数据



```oracle
CREATE OR REPLACE FUNCTION STR_SPLIT(
  P_STR VARCHAR2,
  P_SPLIT VARCHAR2,
  P_NTH NUMBER
) RETURN CHAR
IS
  V_STR VARCHAR2(2000);
  V_NTH NUMBER;
  V_P NUMBER;
  V_RESULT VARCHAR2(2000);
BEGIN
  IF P_SPLIT IS NULL THEN
    RETURN(NULL);
  END IF;
  IF P_NTH < 1 THEN
    RETURN(NULL);
  END IF;
  V_STR := P_STR;
  V_NTH := P_NTH;
  WHILE V_NTH > 0 LOOP
    V_P := INSTR(V_STR, P_SPLIT);
    IF V_P = 0 THEN
      V_RESULT := V_STR;
      V_STR := NULL;
    ELSE
      V_RESULT := SUBSTR(V_STR, 1, V_P - 1);
      V_STR := SUBSTR(V_STR, V_P + LENGTH(P_SPLIT));
    END IF;
    V_NTH := V_NTH - 1;
  END LOOP;
  RETURN(V_RESULT);
END UF_SPLIT;
```

